<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8">
        <title>Carson Farmer - cfarmer</title>
        <link rel="stylesheet" href="http://www.carsonfarmer.com/theme/css/main.css">
        <link href="http://www.carsonfarmer.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Carson Farmer Atom Feed" />
        <link href="http://www.carsonfarmer.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Carson Farmer RSS Feed" />
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
        <script src="http://www.carsonfarmer.com/libs/bootstrap/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="http://leaflet.cloudmade.com/dist/leaflet.js"></script>
        <link rel="stylesheet" href="http://leaflet.cloudmade.com/dist/leaflet.css" />
        <!--[if lte IE 8]><link rel="stylesheet" href="http://leaflet.cloudmade.com/dist/leaflet.ie.css" /><![endif]-->
        <script type="text/javascript" src="http://maps.stamen.com/js/tile.stamen.js?v1.2.3"></script>
        <!--<script src="http://twitter.github.io/bootstrap/assets/js/bootstrap-tooltip.js"></script>-->
        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <script type="text/javascript">
            var loc = [40.7684, -73.9637, 10];
            function initialize() {
                var layer = "watercolor";
                var map = new L.Map("map", {
                        center: new L.LatLng(loc[0], loc[1]),
                        zoom: loc[2],
                        zoomControl: false
                    });
                map.addLayer(new L.StamenTileLayer(layer, {opacity: 0.6}));
                map.locate({setView: true, watch: true})
                  .on('locationfound', function(e) {
                    var marker = L.marker([e.latitude, e.longitude]).bindPopup('Thanks for stopping by!');
                    map.addLayer(marker);
                  });
            }
        </script>
</head> 

<body id="index" class="home" onload="initialize()">
<div id="map" style="position: fixed;"></div>
        <header id="banner" class="body">
                <h1><a href="http://www.carsonfarmer.com/">Carson Farmer  <strong>www.carsonfarmer.com</strong></a></h1>
                <form class="form-inline" id="top-search">
    <div class='input-append'>
        <input type="text" id="top-query" placeholder="Search..." />
        <button class="btn add-on" id="top-btn" type="button">
            <i class="icon-search"></i>
        </button>
<div class="dropdown pull-right" id="top-dropdown">
<a class="dropdown-toggle" id="top-toggle" role="button" data-toggle="dropdown" data-target="#" href="."></a>
<ul class="dropdown-menu pull-right" role="menu" id="top-results" aria-labelledby="top-toggle"></ul></div>
    </div>
</form>
                <div class="navbar">
                    <div class="navbar-inner">
                        <ul class="nav">
<li><a id="home" href="http://www.carsonfarmer.com/"><i class="icon-home"></i></a></li>
                                <li class="divider-vertical"></li>
                                    <li><a href="http://www.carsonfarmer.com/about/"><i class="icon-info-sign"></i> About</a></li>
                                    <li><a href="http://www.carsonfarmer.com/curriculum-vitae/"><i class="icon-rocket"></i> Curriculum Vitae</a></li>
                                    <li class="dropdown">
                                        <a class="dropdown-toggle" data-toggle="dropdown" id="Work-drop" role="button" href="#">
                                        <i class="icon-globe"></i> Work<i class="icon-chevron-down"></i></a>
                                        <ul class="dropdown-menu" role="menu" id="Work-menu" aria-labelledby="Work-drop">
                                                <li><a href="http://www.carsonfarmer.com/research/"><i class="icon-bar-chart"></i> Research</a></li>
                                                <li><a href="http://www.carsonfarmer.com/spatial-software/"><i class="icon-code"></i> Software</a></li>
                                        </ul>
                                    </li>
                                <li class="dropdown pull-right">
                                    <a class="dropdown-toggle" data-toggle="dropdown" role="button" id="social-drop" href="#">
                                    <i class="icon-group"></i> Social<i class="icon-chevron-down"></i></a>
                                    <ul class="dropdown-menu pull-right" role="menu" id="social-menu" aria-labelledby="social-drop">
                                        <li>
                                          <a href="http://www.carsonfarmer.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">
                                          <i class="icon-rss"></i> atom feed</a>
                                        </li>
                                        <li>
                                          <a href="http://www.carsonfarmer.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate">
                                          <i class="icon-rss"></i> rss feed</a>
                                        </li>
                                            <li><a href="https://twitter.com/CarsonFarmer"><i class="icon-twitter"></i> twitter</a></li>
                                            <li><a href="https://github.com/cfarmer"><i class="icon-github"></i> github</a></li>
                                            <li><a href="http://about.me/carson.farmer"><i class="icon-user"></i> about.me</a></li>
                                            <li><a href="http://hunter-cuny.academia.edu/CarsonFarmer"><i class="icon-book"></i> academia.edu</a></li>
                                            <li><a href="http://www.linkedin.com/pub/carson-farmer/40/3bb/27/"><i class="icon-linkedin"></i> linkedin</a></li>
                                            <li><a href="https://plus.google.com/108062014159451325697/about/p/pub"><i class="icon-google-plus"></i> google+</a></li>
                                            <li><a href="http://cuny.is/cfarmer"><i class="icon-comment-alt"></i> cuny.is</a></li>
                                            <li><a href="mailto:carson.farmer@gmail.com"><i class="icon-envelope"></i> email</a></li>
                                    </ul>
                                </li>
                        </ul>
                    </div>
                </div>
        </header><!-- /#banner -->
        
        

                <section id="content" class="body">
                    <ol id="posts-list" class="hfeed">
            <li><article class="hentry shadow">    
                <header>
                    <h1><a href="http://www.carsonfarmer.com/2012/05/introducing-the-centre-for-geoinformatics/" rel="bookmark"
                           title="Permalink to Introducing the Centre for GeoInformatics">Introducing the Centre for&nbsp;GeoInformatics</a></h1>
                </header>
                
                <div class="entry-content">
                  <abbr class="published" title="2012-05-24T09:58:00">
                      <i class="icon-calendar"></i>
                      Thu 24 May 2012
                  </abbr>
                      <address class="vcard author">
                          <i class="icon-user"></i>
                          <a class="url fn" href="http://www.carsonfarmer.com/author/cfarmer.html">cfarmer</a>
                      </address>
                  <footer class="post-info">
    <p class="category">
        <i class="icon-certificate"></i>
        <a href="http://www.carsonfarmer.com/category/announcement.html">Announcement</a> 
    </p>
                  </footer>
                <p><a href="http://www.carsonfarmer.com/images/cgi_logo_full.png"><img alt="image" src="http://www.carsonfarmer.com/images/cgi_logo_full-300x78.png" title="cgi_logo_full" /></a></p>
<p>The new Centre for GeoInformatics (<span class="caps">CGI</span>) within the <a href="http://www.st-andrews.ac.uk/gg/">School of Geography
and Geosciences</a> and the <a href="http://www.st-andrews.ac.uk/gsd/">Department of Geography and Sustainable
Development</a> is now an official university <a href="http://www.st-andrews.ac.uk/gsd/research/centres/#cgi">Research Centre</a> at the
<a href="http://www.st-andrews.ac.uk/">University of St Andrews</a> in Scotland! A few months ago, I started my
new job as <a href="http://www.st-andrews.ac.uk/gsd/people/cjqf/">Research Fellow</a> with <span class="caps">CGI ...</span></p>
                <p class="readmore">
                    <i class="icon-book"></i>
                    <a class="readmore" href="http://www.carsonfarmer.com/2012/05/introducing-the-centre-for-geoinformatics/">read more</a>
                </p>
    <p><i class="icon-comments"></i> <a href="http://www.carsonfarmer.com/2012/05/introducing-the-centre-for-geoinformatics/#disqus_thread">comments</a></p>
                </div><!-- /.entry-content -->
            </article></li>
        

            <li><article class="hentry shadow">    
                <header>
                    <h1><a href="http://www.carsonfarmer.com/2012/04/paper-in-int-journal-applied-earth-observation-geoinformation/" rel="bookmark"
                           title="Permalink to Paper published in International Journal of Applied Earth Observation and Geoinformation">Paper published in International Journal of Applied Earth Observation and&nbsp;Geoinformation</a></h1>
                </header>
                
                <div class="entry-content">
                  <abbr class="published" title="2012-04-13T15:48:00">
                      <i class="icon-calendar"></i>
                      Fri 13 April 2012
                  </abbr>
                      <address class="vcard author">
                          <i class="icon-user"></i>
                          <a class="url fn" href="http://www.carsonfarmer.com/author/cfarmer.html">cfarmer</a>
                      </address>
                  <footer class="post-info">
    <p class="category">
        <i class="icon-certificate"></i>
        <a href="http://www.carsonfarmer.com/category/research-paper.html">Research paper</a> 
    </p>
                  </footer>
                <p>An article I worked on with <a href="http://www2.le.ac.uk/departments/geography/people/ajc36">Lex Comber</a> and <a href="http://www.liv.ac.uk/geography/staff/brunsdon.htm">Chris Brunsdon</a>,
&#8220;Community detection in spatial networks: Inferring land use from a
planar graph of land cover objects&#8221;, has recently been <a href="http://www.sciencedirect.com/science/article/pii/S0303243412000220">published
on-line</a>, with the <a href="http://www.journals.elsevier.com/international-journal-of-applied-earth-observation-and-geoinformation/">International Journal of Applied Earth Observation
and Geoinformation</a>. The article can be cited&nbsp;as:</p>
<blockquote>
<p>Comber, A ...</p></blockquote>
                <p class="readmore">
                    <i class="icon-book"></i>
                    <a class="readmore" href="http://www.carsonfarmer.com/2012/04/paper-in-int-journal-applied-earth-observation-geoinformation/">read more</a>
                </p>
    <p><i class="icon-comments"></i> <a href="http://www.carsonfarmer.com/2012/04/paper-in-int-journal-applied-earth-observation-geoinformation/#disqus_thread">comments</a></p>
                </div><!-- /.entry-content -->
            </article></li>
        

            <li><article class="hentry shadow">    
                <header>
                    <h1><a href="http://www.carsonfarmer.com/2012/04/research-dissemination-and-interactive-visuals/" rel="bookmark"
                           title="Permalink to Research dissemination and interactive visuals">Research dissemination and interactive&nbsp;visuals</a></h1>
                </header>
                
                <div class="entry-content">
                  <abbr class="published" title="2012-04-10T22:12:00">
                      <i class="icon-calendar"></i>
                      Tue 10 April 2012
                  </abbr>
                      <address class="vcard author">
                          <i class="icon-user"></i>
                          <a class="url fn" href="http://www.carsonfarmer.com/author/cfarmer.html">cfarmer</a>
                      </address>
                  <footer class="post-info">
    <p class="category">
        <i class="icon-certificate"></i>
        <a href="http://www.carsonfarmer.com/category/visualisation.html">Visualisation</a> 
    </p>
                  </footer>
                <p>One of my goals for this year is to spend more time and effort
developing effective visualisations for my various research projects, in
an effort to make my research more accessible to others. This is one
thing that I think many academics are particularly bad at: letting
others know what they are up to, and why it might be something worth
looking at. In order to avoid this pitfall, I plan to focus on producing
interactive, web-based visuals suitable for a more general audience <em>in
addition</em> to more traditional forms of research dissemination such as
journals and conference papers. It is my hope that by doing this, I will
be making my research more readily available to those who might actually
be able to use it, and maybe even create some compelling visualisations
in the process. While I&#8217;m not quite ready to start creating full-blown
interactive websites yet, I thought it might be a good idea to start
with something small to get the ball rolling; so I put together an
<a href="/examples/visitors/">upgraded version</a> of my <a href="http://www.carsonfarmer.com/2012/03/because-its-fun-to-map-stuff/">previous map</a> of visitors to www.carsonfarmer.com.

                <p class="readmore">
                    <i class="icon-book"></i>
                    <a class="readmore" href="http://www.carsonfarmer.com/2012/04/research-dissemination-and-interactive-visuals/">read more</a>
                </p>
    <p><i class="icon-comments"></i> <a href="http://www.carsonfarmer.com/2012/04/research-dissemination-and-interactive-visuals/#disqus_thread">comments</a></p>
                </div><!-- /.entry-content -->
            </article></li>
        

            <li><article class="hentry shadow">    
                <header>
                    <h1><a href="http://www.carsonfarmer.com/2012/03/because-its-fun-to-map-stuff/" rel="bookmark"
                           title="Permalink to Because its fun to map stuff…">Because its fun to map&nbsp;stuff&#8230;</a></h1>
                </header>
                
                <div class="entry-content">
                  <abbr class="published" title="2012-03-30T17:46:00">
                      <i class="icon-calendar"></i>
                      Fri 30 March 2012
                  </abbr>
                      <address class="vcard author">
                          <i class="icon-user"></i>
                          <a class="url fn" href="http://www.carsonfarmer.com/author/cfarmer.html">cfarmer</a>
                      </address>
                  <footer class="post-info">
    <p class="category">
        <i class="icon-certificate"></i>
        <a href="http://www.carsonfarmer.com/category/helpful-tips.html">Helpful tips</a> 
    </p>
                  </footer>
                <p>Its been quite a while since my last post, and its Friday and I was
feeling creative, so I decided to map something! I&#8217;ve been looking for
an excuse to produce a nice graphic like the one <a href="http://underdark.wordpress.com/about/">Anita Graser</a>
created to represent Vienna’s green-spaces. She used <a href="http://qgis.org/">Quantum
<span class="caps">GIS ...</span></a></p>
                <p class="readmore">
                    <i class="icon-book"></i>
                    <a class="readmore" href="http://www.carsonfarmer.com/2012/03/because-its-fun-to-map-stuff/">read more</a>
                </p>
    <p><i class="icon-comments"></i> <a href="http://www.carsonfarmer.com/2012/03/because-its-fun-to-map-stuff/#disqus_thread">comments</a></p>
                </div><!-- /.entry-content -->
            </article></li>
        

            <li><article class="hentry shadow">    
                <header>
                    <h1><a href="http://www.carsonfarmer.com/2011/12/environment-and-planning-a-paper-published/" rel="bookmark"
                           title="Permalink to Environment and Planning A paper published">Environment and Planning A paper&nbsp;published</a></h1>
                </header>
                
                <div class="entry-content">
                  <abbr class="published" title="2011-12-01T13:52:00">
                      <i class="icon-calendar"></i>
                      Thu 01 December 2011
                  </abbr>
                      <address class="vcard author">
                          <i class="icon-user"></i>
                          <a class="url fn" href="http://www.carsonfarmer.com/author/cfarmer.html">cfarmer</a>
                      </address>
                  <footer class="post-info">
    <p class="category">
        <i class="icon-certificate"></i>
        <a href="http://www.carsonfarmer.com/category/research-paper.html">Research paper</a> 
    </p>
                  </footer>
                <p>My latest article, &#8220;Network-based functional regions&#8221;, has recently been
<a href="http://www.envplan.com/abstract.cgi?id=a44136">published on-line</a>, with <a href="http://www.envplan.com/A.html">Environment and Planning A</a>. The article
can be cited&nbsp;as:</p>
<blockquote>
<p>Farmer C J Q, Stewart Fotheringham A, 2011, &#8220;Network-based functional
regions&#8221; <em>Environment and Planning A</em> 43(11) 2723 –&nbsp;2741</p>
</blockquote>
<p>If you would like a copy, but do not ...</p>
                <p class="readmore">
                    <i class="icon-book"></i>
                    <a class="readmore" href="http://www.carsonfarmer.com/2011/12/environment-and-planning-a-paper-published/">read more</a>
                </p>
    <p><i class="icon-comments"></i> <a href="http://www.carsonfarmer.com/2011/12/environment-and-planning-a-paper-published/#disqus_thread">comments</a></p>
                </div><!-- /.entry-content -->
            </article></li>
        

            <li><article class="hentry shadow">    
                <header>
                    <h1><a href="http://www.carsonfarmer.com/2011/11/its-about-time/" rel="bookmark"
                           title="Permalink to It’s about time…">It&#8217;s about&nbsp;time&#8230;</a></h1>
                </header>
                
                <div class="entry-content">
                  <abbr class="published" title="2011-11-09T12:16:00">
                      <i class="icon-calendar"></i>
                      Wed 09 November 2011
                  </abbr>
                      <address class="vcard author">
                          <i class="icon-user"></i>
                          <a class="url fn" href="http://www.carsonfarmer.com/author/cfarmer.html">cfarmer</a>
                      </address>
                  <footer class="post-info">
    <p class="category">
        <i class="icon-certificate"></i>
        <a href="http://www.carsonfarmer.com/category/announcement.html">Announcement</a> 
    </p>
                  </footer>
                <p>Well its been a long time since my last post, but I <em>do</em> have a
relatively good reason: I was finishing up my PhD thesis. The good news
is that I&#8217;m now done and graduated! I&#8217;m hoping I&#8217;ll have a bit more time
to blog and continue working on side-projects that I had to put on-hold
while finishing up. My plan for the next few months is to finish up here
in Maynooth, (unofficially) start some post-doc work, and finish/get
going on several papers on my PhD research. I&#8217;m also going to try to
learn Bayesian statistics, fiddle about with some visualizations I&#8217;ve
been working on, and start getting back into <span class="caps">QGIS</span> and Python development&nbsp;again</p>
<p>In the mean time, I&#8217;ve put together a fun little visualization of my
PhD thesis in the form of a word-cloud.

                <p class="readmore">
                    <i class="icon-book"></i>
                    <a class="readmore" href="http://www.carsonfarmer.com/2011/11/its-about-time/">read more</a>
                </p>
    <p><i class="icon-comments"></i> <a href="http://www.carsonfarmer.com/2011/11/its-about-time/#disqus_thread">comments</a></p>
                </div><!-- /.entry-content -->
            </article></li>
        

            <li><article class="hentry shadow">    
                <header>
                    <h1><a href="http://www.carsonfarmer.com/2011/03/adding-direct-editing-of-geometry-fields-in-qgis/" rel="bookmark"
                           title="Permalink to Adding direct editing of geometry fields in QGIS">Adding direct editing of geometry fields in <span class="caps">QGIS</span></a></h1>
                </header>
                
                <div class="entry-content">
                  <abbr class="published" title="2011-03-12T18:43:00">
                      <i class="icon-calendar"></i>
                      Sat 12 March 2011
                  </abbr>
                      <address class="vcard author">
                          <i class="icon-user"></i>
                          <a class="url fn" href="http://www.carsonfarmer.com/author/cfarmer.html">cfarmer</a>
                      </address>
                  <footer class="post-info">
    <p class="category">
        <i class="icon-certificate"></i>
        <a href="http://www.carsonfarmer.com/category/helpful-tips.html">Helpful tips</a> 
    </p>
                  </footer>
                <p>Being able to add/remove attributes isn&#8217;t actually a very new feature
for <span class="caps">QGIS</span> at this point. However, to date non of the fTools functions
(Vector menu) have taken advantage of this capability. If a tool needed
to create a new field in the input vector layer, it simply wrote a new
version of the vector layer to disk with the additional fields added.
There have been several requests to allow some tools to add/update
attributes directly on the input layers, so I went ahead and created a
script to test this functionality out. I&#8217;ve 
<a href="|filname|/uploads/add_geometry_information.py">provided a copy here</a> 
for anyone who would like to test it out before I add it to <span class="caps">QGIS</span>
permanently. Basically, the script will replace/update three of the
Vector menu tools, including <code>Analysis \&gt; Sum line lengths</code>, <code>Analysis
\&gt; Points in polygon</code>, and <code>Geometry tools \&gt; Add/Export geometry
info</code>.

                <p class="readmore">
                    <i class="icon-book"></i>
                    <a class="readmore" href="http://www.carsonfarmer.com/2011/03/adding-direct-editing-of-geometry-fields-in-qgis/">read more</a>
                </p>
    <p><i class="icon-comments"></i> <a href="http://www.carsonfarmer.com/2011/03/adding-direct-editing-of-geometry-fields-in-qgis/#disqus_thread">comments</a></p>
                </div><!-- /.entry-content -->
            </article></li>
        

            <li><article class="hentry shadow">    
                <header>
                    <h1><a href="http://www.carsonfarmer.com/2010/11/because-its-friday/" rel="bookmark"
                           title="Permalink to Because its Friday">Because its&nbsp;Friday</a></h1>
                </header>
                
                <div class="entry-content">
                  <abbr class="published" title="2010-11-06T01:00:00">
                      <i class="icon-calendar"></i>
                      Sat 06 November 2010
                  </abbr>
                      <address class="vcard author">
                          <i class="icon-user"></i>
                          <a class="url fn" href="http://www.carsonfarmer.com/author/cfarmer.html">cfarmer</a>
                      </address>
                  <footer class="post-info">
    <p class="category">
        <i class="icon-certificate"></i>
        <a href="http://www.carsonfarmer.com/category/python.html">Python</a> 
    </p>
                  </footer>
                <p>My two favorite scientific programming languages are <a href="http://www.python.org">Python</a> and
<a href="http://http://www.r-project.org/">R</a>, each for their own specific strengths. I stick with R for most of
my serious stats stuff, but for everyday processing, analysis, and <span class="caps">GUI</span>
building, Python is my <em>modus operandi</em>. Lately however, I&#8217;ve been doing
more and more things ...</p>
                <p class="readmore">
                    <i class="icon-book"></i>
                    <a class="readmore" href="http://www.carsonfarmer.com/2010/11/because-its-friday/">read more</a>
                </p>
    <p><i class="icon-comments"></i> <a href="http://www.carsonfarmer.com/2010/11/because-its-friday/#disqus_thread">comments</a></p>
                </div><!-- /.entry-content -->
            </article></li>
            </ol><!-- /#posts-list -->
<p class="paginator">
            <a href="http://www.carsonfarmer.com/author/cfarmer5.html">
                <i class="icon-arrow-left"></i>
            </a>
    6 / 10
        <a href="http://www.carsonfarmer.com/author/cfarmer7.html">
            <i class="icon-arrow-right"></i>
        </a>
</p>            </section><!-- /#content -->
        <section id="extras" class="body shadow">
<div class="twitter">
        <h2><i class="icon-twitter"></i> twitter</h2>
        <a class="twitter-timeline" href="https://twitter.com/CarsonFarmer" 
            data-link-color="#2A75A9" 
            data-chrome="nofooter noheader noborders transparent" 
            data-widget-id="330339195518337025"
            height="300" lang="EN"
            data-related="CarsonFarmer">
            Tweets by @CarsonFarmer
        </a>
        <script>
            !function(d,s,id){
                var js,fjs=d.getElementsByTagName(s)[0], p=/^http:/.test(d.location)?'http':'https';
                if(!d.getElementById(id)){
                    js=d.createElement(s);
                    js.id=id;js.src=p+"://platform.twitter.com/widgets.js";
                    fjs.parentNode.insertBefore(js,fjs);
                }
            }(document,"script","twitter-wjs");
        </script>

</div>
        
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body ">
                <address id="about" class="vcard body shadow">
                                <ul id="links">
                                    <li><a href="http://www.geo.hunter.cuny.edu/cfarmer/">CUNY Faculty Page</a></li>
                                    <li><a href="http://www.carsilab.org/">CARSI Lab</a></li>
                                </ul>
                Carson Farmer| Assistant Professor of GIScience | Department Geography</br>
                Hunter College - CUNY | 695 Park Avenue, New York | New York, 10065</br>
                </address><!-- /#about -->
                <p style="text-align: center;">This blog is proudly powered by <a href="http://getpelican.com/">Pelican</a>, 
                which takes great advantage of <a href="http://python.org">Python</a>.</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-41110370-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
<script type="text/javascript">
    var disqus_shortname = 'carsonfarmer';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<script>
    $(function() {
        var search = window.location.search.substring(1)
        if (search == "feed=rss2") window.location = "http://www.carsonfarmer.com/feeds/all.rss.xml"
    });

    $(document).ready(function() {
    
        //Calculate the height of <header>
        //Use outerHeight() instead of height() if have padding
        var aboveHeight = $('.navbar').position().top;

    //when scroll
        $(window).scroll(function() {
            //if scrolled down more than the header’s height
                if ($(window).scrollTop() > aboveHeight){
                // if yes, add "fixed" class to the <nav>
                // add padding top to the #content 
                    // if (!$('nav').hasClass('fixed')) {
                    //     $('.home_link').show("slide", { direction: "right" }, 250)
                    // };
                    $('.navbar').addClass('fixed').addClass('shadow').css('top','0').next() //.addClass('navbar-fixed-top').next()//
                    $('#content').css('margin-top',aboveHeight+20+'px'); // value is same as the height of the nav
                } else {
                // when scroll up or less than aboveHeight,
                // remove the “fixed” class, and the padding-top
                    // if ($('nav').hasClass('fixed')) {
                    //     console.log('test')
                    //     $('.home_link').hide("slide", { direction: "right" }, 250)
                    // };
                    $('.navbar').removeClass('fixed').removeClass('shadow').next()
                    $('#content').css('margin-top','0px');
                }
        });
        $("#top-query").keydown(function(event) {
            if (event.keyCode == 13) {
                event.preventDefault();
                site_search();
                return false;
            }
        });
        $("#top-btn").click(function(event) {
            event.preventDefault();
            site_search();
            return false;
        });
    });
    
function site_search() {
    var query = $("#top-query").val();
    if (query == "") return false;
    var api = 'http://tapirgo.com/api/1/search.json?';
    var token = '51980cd33f61b05bbb000ce0';
    var el = $("#top-results");
    el.empty();
    el.append('<li style="padding-left: 10px">Fetching results...</li>')
    $.getJSON(api + 'token=' + token + '&query=' + query + '&callback=?', 
        function(data) {
            // insert function here if needed
            if (data.length) {
                el.empty();
                $.each(data, function(key, val) {
                    var xx = new Date(val.published_on)+""
                    if ((/^http\:\/\/www.carsonfarmer.com/).test(val.link)) { // hack to ignore duplicate returns
                        el.append('<li><a href="' + val.link + '" data-toggle="tooltip" data-placement="right" ' + 
                            'title="'+ xx.substring(0,15) + '">' + val.title + '</a>' + '</li>');
                    }
                });
            } else {
                el.empty();
                el.append('<li style="padding-left: 10px">No results found...</li>')
            };
        $("[data-toggle=tooltip]").tooltip();
    });
    $("#top-toggle").dropdown('toggle');
}
</script>
</body>
</html>