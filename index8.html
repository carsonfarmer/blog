<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8">
        <title>Carson Farmer</title>
        <link rel="stylesheet" href="http://www.carsonfarmer.com/theme/css/main.css">
        <link href="http://www.carsonfarmer.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Carson Farmer Atom Feed" />
        <link href="http://www.carsonfarmer.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Carson Farmer RSS Feed" />
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
        <script src="http://www.carsonfarmer.com/libs/bootstrap/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="http://leaflet.cloudmade.com/dist/leaflet.js"></script>
        <link rel="stylesheet" href="http://leaflet.cloudmade.com/dist/leaflet.css" />
        <!--[if lte IE 8]><link rel="stylesheet" href="http://leaflet.cloudmade.com/dist/leaflet.ie.css" /><![endif]-->
        <script type="text/javascript" src="http://maps.stamen.com/js/tile.stamen.js?v1.2.3"></script>
        <!--<script src="http://twitter.github.io/bootstrap/assets/js/bootstrap-tooltip.js"></script>-->
        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <script type="text/javascript">
            var loc = [40.7684, -73.9637, 10];
            function initialize() {
                var layer = "watercolor";
                var map = new L.Map("map", {
                        center: new L.LatLng(loc[0], loc[1]),
                        zoom: loc[2],
                        zoomControl: false
                    });
                map.addLayer(new L.StamenTileLayer(layer, {opacity: 0.6}));
                map.locate({setView: true, watch: true})
                  .on('locationfound', function(e) {
                    var marker = L.marker([e.latitude, e.longitude]).bindPopup('Thanks for stopping by!');
                    map.addLayer(marker);
                  });
            }
        </script>
</head> 

<body id="index" class="home" onload="initialize()">
<div id="map" style="position: fixed;"></div>
        <header id="banner" class="body">
                <h1><a href="http://www.carsonfarmer.com/">Carson Farmer  <strong>www.carsonfarmer.com</strong></a></h1>
                <form class="form-inline" id="top-search">
    <div class='input-append'>
        <input type="text" id="top-query" placeholder="Search..." />
        <button class="btn add-on" id="top-btn" type="button">
            <i class="icon-search"></i>
        </button>
<div class="dropdown pull-right" id="top-dropdown">
<a class="dropdown-toggle" id="top-toggle" role="button" data-toggle="dropdown" data-target="#" href="."></a>
<ul class="dropdown-menu pull-right" role="menu" id="top-results" aria-labelledby="top-toggle"></ul></div>
    </div>
</form>
                <div class="navbar">
                    <div class="navbar-inner">
                        <ul class="nav">
<li><a id="home" href="http://www.carsonfarmer.com/"><i class="icon-home"></i></a></li>
                                <li class="divider-vertical"></li>
                                    <li><a href="http://www.carsonfarmer.com/about/"><i class="icon-info-sign"></i> About</a></li>
                                    <li><a href="http://www.carsonfarmer.com/curriculum-vitae/"><i class="icon-rocket"></i> Curriculum Vitae</a></li>
                                    <li class="dropdown">
                                        <a class="dropdown-toggle" data-toggle="dropdown" id="Work-drop" role="button" href="#">
                                        <i class="icon-globe"></i> Work<i class="icon-chevron-down"></i></a>
                                        <ul class="dropdown-menu" role="menu" id="Work-menu" aria-labelledby="Work-drop">
                                                <li><a href="http://www.carsonfarmer.com/research/"><i class="icon-bar-chart"></i> Research</a></li>
                                                <li><a href="http://www.carsonfarmer.com/spatial-software/"><i class="icon-code"></i> Software</a></li>
                                        </ul>
                                    </li>
                                <li class="dropdown pull-right">
                                    <a class="dropdown-toggle" data-toggle="dropdown" role="button" id="social-drop" href="#">
                                    <i class="icon-group"></i> Social<i class="icon-chevron-down"></i></a>
                                    <ul class="dropdown-menu pull-right" role="menu" id="social-menu" aria-labelledby="social-drop">
                                        <li>
                                          <a href="http://www.carsonfarmer.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">
                                          <i class="icon-rss"></i> atom feed</a>
                                        </li>
                                        <li>
                                          <a href="http://www.carsonfarmer.com/feeds/all.rss.xml" type="application/rss+xml" rel="alternate">
                                          <i class="icon-rss"></i> rss feed</a>
                                        </li>
                                            <li><a href="https://twitter.com/CarsonFarmer"><i class="icon-twitter"></i> twitter</a></li>
                                            <li><a href="https://github.com/cfarmer"><i class="icon-github"></i> github</a></li>
                                            <li><a href="http://about.me/carson.farmer"><i class="icon-user"></i> about.me</a></li>
                                            <li><a href="http://hunter-cuny.academia.edu/CarsonFarmer"><i class="icon-book"></i> academia.edu</a></li>
                                            <li><a href="http://www.linkedin.com/pub/carson-farmer/40/3bb/27/"><i class="icon-linkedin"></i> linkedin</a></li>
                                            <li><a href="https://plus.google.com/108062014159451325697/about/p/pub"><i class="icon-google-plus"></i> google+</a></li>
                                            <li><a href="http://cuny.is/cfarmer"><i class="icon-comment-alt"></i> cuny.is</a></li>
                                            <li><a href="mailto:carson.farmer@gmail.com"><i class="icon-envelope"></i> email</a></li>
                                    </ul>
                                </li>
                        </ul>
                    </div>
                </div>
        </header><!-- /#banner -->
        
        

                <section id="content" class="body">
                    <ol id="posts-list" class="hfeed">
            <li><article class="hentry shadow">    
                <header>
                    <h1><a href="http://www.carsonfarmer.com/2009/11/qgis-developer-meeting-update/" rel="bookmark"
                           title="Permalink to QGIS developer meeting update"><span class="caps">QGIS</span> developer meeting&nbsp;update</a></h1>
                </header>
                
                <div class="entry-content">
                  <abbr class="published" title="2009-11-11T17:33:00">
                      <i class="icon-calendar"></i>
                      Wed 11 November 2009
                  </abbr>
                      <address class="vcard author">
                          <i class="icon-user"></i>
                          <a class="url fn" href="http://www.carsonfarmer.com/author/cfarmer.html">cfarmer</a>
                      </address>
                  <footer class="post-info">
    <p class="category">
        <i class="icon-certificate"></i>
        <a href="http://www.carsonfarmer.com/category/announcement.html">Announcement</a> 
    </p>
                  </footer>
                <p>Last week I attended the 2009 <span class="caps">QGIS</span> Developers Meeting in Vienna,
Austria. We all had a really good time, <a href="http://blog.qgis.org/node/139">met many new people</a>, and
actually got a lot done in the process. There have been updates about
the meeting <a href="http://qgis.org/en/developer-meeting.html">(hackfest)</a> on the <span class="caps">QGIS</span> blog, and Tim Sutton has <a href="http://linfiniti.com/2009/11/report-back-on-the-qgis-hackfest-in-vienna-november-2009/">written
a few words</a> about our progress as well. I&#8217;m not going to repeat what
others have said, but I <em>would</em> like to give a quick update on the work
that I was doing at the meeting, and show off the new geoprocessing
features now available to all <span class="caps">QGIS</span> developers (Python and C++).

                <p class="readmore">
                    <i class="icon-book"></i>
                    <a class="readmore" href="http://www.carsonfarmer.com/2009/11/qgis-developer-meeting-update/">read more</a>
                </p>
    <p><i class="icon-comments"></i> <a href="http://www.carsonfarmer.com/2009/11/qgis-developer-meeting-update/#disqus_thread">comments</a></p>
                </div><!-- /.entry-content -->
            </article></li>
        

            <li><article class="hentry shadow">    
                <header>
                    <h1><a href="http://www.carsonfarmer.com/2009/10/community-structure-in-directed-weighted-networks/" rel="bookmark"
                           title="Permalink to Community structure in directed, weighted networks">Community structure in directed, weighted&nbsp;networks</a></h1>
                </header>
                
                <div class="entry-content">
                  <abbr class="published" title="2009-10-20T16:24:00">
                      <i class="icon-calendar"></i>
                      Tue 20 October 2009
                  </abbr>
                      <address class="vcard author">
                          <i class="icon-user"></i>
                          <a class="url fn" href="http://www.carsonfarmer.com/author/cfarmer.html">cfarmer</a>
                      </address>
                  <footer class="post-info">
    <p class="category">
        <i class="icon-certificate"></i>
        <a href="http://www.carsonfarmer.com/category/networks.html">Networks</a> 
    </p>
                  </footer>
                <p>Many natural and human systems can be represented as networks, including
the Internet, social interactions, food webs, and transportation and
communication flows. One thing that these types of networks have in
common, is that they can each be represented as a series of vertices (or
nodes) and edges (or links). This <a href="http://toreopsahl.com/2008/11/28/network-weighted-network/">blog entry</a> presents a nice
description of networks, highlighting the differences between various
network types (directed, undirected, weighted, unweighted, etc.).

                <p class="readmore">
                    <i class="icon-book"></i>
                    <a class="readmore" href="http://www.carsonfarmer.com/2009/10/community-structure-in-directed-weighted-networks/">read more</a>
                </p>
    <p><i class="icon-comments"></i> <a href="http://www.carsonfarmer.com/2009/10/community-structure-in-directed-weighted-networks/#disqus_thread">comments</a></p>
                </div><!-- /.entry-content -->
            </article></li>
        

            <li><article class="hentry shadow">    
                <header>
                    <h1><a href="http://www.carsonfarmer.com/2009/10/canadian-geographer-paper-published/" rel="bookmark"
                           title="Permalink to Canadian Geographer paper published">Canadian Geographer paper&nbsp;published</a></h1>
                </header>
                
                <div class="entry-content">
                  <abbr class="published" title="2009-10-12T12:32:00">
                      <i class="icon-calendar"></i>
                      Mon 12 October 2009
                  </abbr>
                      <address class="vcard author">
                          <i class="icon-user"></i>
                          <a class="url fn" href="http://www.carsonfarmer.com/author/cfarmer.html">cfarmer</a>
                      </address>
                  <footer class="post-info">
    <p class="category">
        <i class="icon-certificate"></i>
        <a href="http://www.carsonfarmer.com/category/research-paper.html">Research paper</a> 
    </p>
                  </footer>
                <p>My article &#8220;Spatial-temporal patterns of snow cover in western Canada&#8221;,
has now been <a href="http://www3.interscience.wiley.com/journal/122636489/abstract">published on-line</a> with <a href="http://www.wiley.com/bw/journal.asp?ref=0008-3658">The Canadian Geographer</a>.
<strike>At this stage, only the proof copy is available online.</strike>
The article is now officially published, and can be cited&nbsp;as:</p>
<blockquote>
<p>Farmer, <span class="caps">C. J.</span> Q., Nelson, T. A., Wulder, <span class="caps">M.A ...</span></p></blockquote>
                <p class="readmore">
                    <i class="icon-book"></i>
                    <a class="readmore" href="http://www.carsonfarmer.com/2009/10/canadian-geographer-paper-published/">read more</a>
                </p>
    <p><i class="icon-comments"></i> <a href="http://www.carsonfarmer.com/2009/10/canadian-geographer-paper-published/#disqus_thread">comments</a></p>
                </div><!-- /.entry-content -->
            </article></li>
        

            <li><article class="hentry shadow">    
                <header>
                    <h1><a href="http://www.carsonfarmer.com/2009/10/remote-sensing-of-environment-paper-published/" rel="bookmark"
                           title="Permalink to Remote Sensing of Environment paper published">Remote Sensing of Environment paper&nbsp;published</a></h1>
                </header>
                
                <div class="entry-content">
                  <abbr class="published" title="2009-10-06T13:30:00">
                      <i class="icon-calendar"></i>
                      Tue 06 October 2009
                  </abbr>
                      <address class="vcard author">
                          <i class="icon-user"></i>
                          <a class="url fn" href="http://www.carsonfarmer.com/author/cfarmer.html">cfarmer</a>
                      </address>
                  <footer class="post-info">
    <p class="category">
        <i class="icon-certificate"></i>
        <a href="http://www.carsonfarmer.com/category/research-paper.html">Research paper</a> 
    </p>
                  </footer>
                <p>My latest article, &#8220;Identification of snow cover regimes through spatial
and temporal clustering of satellite microwave brightness temperatures&#8221;,
has recently been <a href="http://dx.doi.org/10.1016/j.rse.2009.09.002">published on-line</a>, with the journal<a href="http://www.sciencedirect.com/science/journal/00344257">Remote Sensing
of Environment</a>. <strike>For now,</strike>
<span class="caps">UPDATE</span>: The article can be cited&nbsp;as:</p>
<blockquote>
<p>Farmer, <span class="caps">C. J.</span> Q., Nelson, T. A., Wulder, <span class="caps">M.A.</span> and ...</p></blockquote>
                <p class="readmore">
                    <i class="icon-book"></i>
                    <a class="readmore" href="http://www.carsonfarmer.com/2009/10/remote-sensing-of-environment-paper-published/">read more</a>
                </p>
    <p><i class="icon-comments"></i> <a href="http://www.carsonfarmer.com/2009/10/remote-sensing-of-environment-paper-published/#disqus_thread">comments</a></p>
                </div><!-- /.entry-content -->
            </article></li>
        

            <li><article class="hentry shadow">    
                <header>
                    <h1><a href="http://www.carsonfarmer.com/2009/09/introduction-to-open-source-geospatial-software/" rel="bookmark"
                           title="Permalink to Introduction to Open Source Geospatial Software">Introduction to Open Source Geospatial&nbsp;Software</a></h1>
                </header>
                
                <div class="entry-content">
                  <abbr class="published" title="2009-09-25T10:48:00">
                      <i class="icon-calendar"></i>
                      Fri 25 September 2009
                  </abbr>
                      <address class="vcard author">
                          <i class="icon-user"></i>
                          <a class="url fn" href="http://www.carsonfarmer.com/author/cfarmer.html">cfarmer</a>
                      </address>
                  <footer class="post-info">
    <p class="category">
        <i class="icon-certificate"></i>
        <a href="http://www.carsonfarmer.com/category/announcement.html">Announcement</a> 
    </p>
                  </footer>
                <p>Announcing an opportunity to learn about the leading edge free and
open-source technologies for desktop and web-based mapping and data
analysis. This is a two day Masterclass focusing on introducing
participants to the wonderful world of open source geospatial software.
Check out the <a href="http://shortcourses.maths.lancs.ac.uk/geospatial">announcement</a> from the Postgraduate Statistics Centre
at ...</p>
                <p class="readmore">
                    <i class="icon-book"></i>
                    <a class="readmore" href="http://www.carsonfarmer.com/2009/09/introduction-to-open-source-geospatial-software/">read more</a>
                </p>
    <p><i class="icon-comments"></i> <a href="http://www.carsonfarmer.com/2009/09/introduction-to-open-source-geospatial-software/#disqus_thread">comments</a></p>
                </div><!-- /.entry-content -->
            </article></li>
        

            <li><article class="hentry shadow">    
                <header>
                    <h1><a href="http://www.carsonfarmer.com/2009/09/voronoi-polygons-with-r/" rel="bookmark"
                           title="Permalink to Voronoi polygons with R">Voronoi polygons with&nbsp;R</a></h1>
                </header>
                
                <div class="entry-content">
                  <abbr class="published" title="2009-09-16T22:30:00">
                      <i class="icon-calendar"></i>
                      Wed 16 September 2009
                  </abbr>
                      <address class="vcard author">
                          <i class="icon-user"></i>
                          <a class="url fn" href="http://www.carsonfarmer.com/author/cfarmer.html">cfarmer</a>
                      </address>
                  <footer class="post-info">
    <p class="category">
        <i class="icon-certificate"></i>
        <a href="http://www.carsonfarmer.com/category/helpful-tips.html">Helpful tips</a> 
    </p>
                  </footer>
                <p>To create a nice bounded Voronoi polygons tessellation of a point layer
in <code>R</code>, we need two libraries: <code>sp</code> and <code>deldir</code>. The following function
takes a <code>SpatialPointsDataFrame</code> as input, and returns a
<code>SpatialPolygonsDataFrame</code> that represents the Voronoi tessellation of
the input point layer.

                <p class="readmore">
                    <i class="icon-book"></i>
                    <a class="readmore" href="http://www.carsonfarmer.com/2009/09/voronoi-polygons-with-r/">read more</a>
                </p>
    <p><i class="icon-comments"></i> <a href="http://www.carsonfarmer.com/2009/09/voronoi-polygons-with-r/#disqus_thread">comments</a></p>
                </div><!-- /.entry-content -->
            </article></li>
        

            <li><article class="hentry shadow">    
                <header>
                    <h1><a href="http://www.carsonfarmer.com/2009/09/journal-of-spatial-information-science/" rel="bookmark"
                           title="Permalink to Journal of Spatial Information Science">Journal of Spatial Information&nbsp;Science</a></h1>
                </header>
                
                <div class="entry-content">
                  <abbr class="published" title="2009-09-10T11:19:00">
                      <i class="icon-calendar"></i>
                      Thu 10 September 2009
                  </abbr>
                      <address class="vcard author">
                          <i class="icon-user"></i>
                          <a class="url fn" href="http://www.carsonfarmer.com/author/cfarmer.html">cfarmer</a>
                      </address>
                  <footer class="post-info">
    <p class="category">
        <i class="icon-certificate"></i>
        <a href="http://www.carsonfarmer.com/category/announcement.html">Announcement</a> 
    </p>
                  </footer>
                <p>Check out the <a href="http://josis.org/index.php/josis/index">Journal of Spatial Information Science</a>, a new,
peer-reviewed, open-access journal with a range of well established
geospatial academics on the editorial board.

                <p class="readmore">
                    <i class="icon-book"></i>
                    <a class="readmore" href="http://www.carsonfarmer.com/2009/09/journal-of-spatial-information-science/">read more</a>
                </p>
    <p><i class="icon-comments"></i> <a href="http://www.carsonfarmer.com/2009/09/journal-of-spatial-information-science/#disqus_thread">comments</a></p>
                </div><!-- /.entry-content -->
            </article></li>
        

            <li><article class="hentry shadow">    
                <header>
                    <h1><a href="http://www.carsonfarmer.com/2009/08/python-matlab-and-r/" rel="bookmark"
                           title="Permalink to Python, Matlab, and R">Python, Matlab, and&nbsp;R</a></h1>
                </header>
                
                <div class="entry-content">
                  <abbr class="published" title="2009-08-12T15:29:00">
                      <i class="icon-calendar"></i>
                      Wed 12 August 2009
                  </abbr>
                      <address class="vcard author">
                          <i class="icon-user"></i>
                          <a class="url fn" href="http://www.carsonfarmer.com/author/cfarmer.html">cfarmer</a>
                      </address>
                  <footer class="post-info">
    <p class="category">
        <i class="icon-certificate"></i>
        <a href="http://www.carsonfarmer.com/category/helpful-tips.html">Helpful tips</a> 
    </p>
                  </footer>
                <p>One project I&#8217;m working on at the moment involves exploring a dynamic
extension of the Isomap algorithm for visualising constantly varying
real-world road networks. Currently, we are testing out the method on a
small scale simulated road network, and most of the original code
(written by <a href="http://ticc.uvt.nl/~lvdrmaaten/Laurens_van_der_Maaten/Home.html">Laurens van der Maaten</a>, with updates by <a href="http://ncg.nuim.ie/ncg/people/staff/pozdnoukhov/index.shtml">Alexei
Pozdnoukhov</a>), was done in Matlab. Since this work is eventually going
to have to run on relatively large datasets, and probably behind the
scenes on a server somewhere, we decided that Python was the way to go.
The goal therefore was to reproduce the Matlab code using only Python
libraries, and the fewer additional libraries required, the better.

                <p class="readmore">
                    <i class="icon-book"></i>
                    <a class="readmore" href="http://www.carsonfarmer.com/2009/08/python-matlab-and-r/">read more</a>
                </p>
    <p><i class="icon-comments"></i> <a href="http://www.carsonfarmer.com/2009/08/python-matlab-and-r/#disqus_thread">comments</a></p>
                </div><!-- /.entry-content -->
            </article></li>
            </ol><!-- /#posts-list -->
<p class="paginator">
            <a href="http://www.carsonfarmer.com/index7.html">
                <i class="icon-arrow-left"></i>
            </a>
    8 / 10
        <a href="http://www.carsonfarmer.com/index9.html">
            <i class="icon-arrow-right"></i>
        </a>
</p>            </section><!-- /#content -->
        <section id="extras" class="body shadow">
<div class="twitter">
        <h2><i class="icon-twitter"></i> twitter</h2>
        <a class="twitter-timeline" href="https://twitter.com/CarsonFarmer" 
            data-link-color="#2A75A9" 
            data-chrome="nofooter noheader noborders transparent" 
            data-widget-id="330339195518337025"
            height="300" lang="EN"
            data-related="CarsonFarmer">
            Tweets by @CarsonFarmer
        </a>
        <script>
            !function(d,s,id){
                var js,fjs=d.getElementsByTagName(s)[0], p=/^http:/.test(d.location)?'http':'https';
                if(!d.getElementById(id)){
                    js=d.createElement(s);
                    js.id=id;js.src=p+"://platform.twitter.com/widgets.js";
                    fjs.parentNode.insertBefore(js,fjs);
                }
            }(document,"script","twitter-wjs");
        </script>

</div>
        
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body ">
                <address id="about" class="vcard body shadow">
                                <ul id="links">
                                    <li><a href="http://www.geo.hunter.cuny.edu/cfarmer/">CUNY Faculty Page</a></li>
                                    <li><a href="http://www.carsilab.org/">CARSI Lab</a></li>
                                </ul>
                Carson Farmer| Assistant Professor of GIScience | Department Geography</br>
                Hunter College - CUNY | 695 Park Avenue, New York | New York, 10065</br>
                </address><!-- /#about -->
                <p style="text-align: center;">This blog is proudly powered by <a href="http://getpelican.com/">Pelican</a>, 
                which takes great advantage of <a href="http://python.org">Python</a>.</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-41110370-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
<script type="text/javascript">
    var disqus_shortname = 'carsonfarmer';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<script>
    $(function() {
        var search = window.location.search.substring(1)
        if (search == "feed=rss2") window.location = "http://www.carsonfarmer.com/feeds/all.rss.xml"
    });

    $(document).ready(function() {
    
        //Calculate the height of <header>
        //Use outerHeight() instead of height() if have padding
        var aboveHeight = $('.navbar').position().top;

    //when scroll
        $(window).scroll(function() {
            //if scrolled down more than the header’s height
                if ($(window).scrollTop() > aboveHeight){
                // if yes, add "fixed" class to the <nav>
                // add padding top to the #content 
                    // if (!$('nav').hasClass('fixed')) {
                    //     $('.home_link').show("slide", { direction: "right" }, 250)
                    // };
                    $('.navbar').addClass('fixed').addClass('shadow').css('top','0').next() //.addClass('navbar-fixed-top').next()//
                    $('#content').css('margin-top',aboveHeight+20+'px'); // value is same as the height of the nav
                } else {
                // when scroll up or less than aboveHeight,
                // remove the “fixed” class, and the padding-top
                    // if ($('nav').hasClass('fixed')) {
                    //     console.log('test')
                    //     $('.home_link').hide("slide", { direction: "right" }, 250)
                    // };
                    $('.navbar').removeClass('fixed').removeClass('shadow').next()
                    $('#content').css('margin-top','0px');
                }
        });
        $("#top-query").keydown(function(event) {
            if (event.keyCode == 13) {
                event.preventDefault();
                site_search();
                return false;
            }
        });
        $("#top-btn").click(function(event) {
            event.preventDefault();
            site_search();
            return false;
        });
    });
    
function site_search() {
    var query = $("#top-query").val();
    if (query == "") return false;
    var api = 'http://tapirgo.com/api/1/search.json?';
    var token = '51980cd33f61b05bbb000ce0';
    var el = $("#top-results");
    el.empty();
    el.append('<li style="padding-left: 10px">Fetching results...</li>')
    $.getJSON(api + 'token=' + token + '&query=' + query + '&callback=?', 
        function(data) {
            // insert function here if needed
            if (data.length) {
                el.empty();
                $.each(data, function(key, val) {
                    var xx = new Date(val.published_on)+""
                    if ((/^http\:\/\/www.carsonfarmer.com/).test(val.link)) { // hack to ignore duplicate returns
                        el.append('<li><a href="' + val.link + '" data-toggle="tooltip" data-placement="right" ' + 
                            'title="'+ xx.substring(0,15) + '">' + val.title + '</a>' + '</li>');
                    }
                });
            } else {
                el.empty();
                el.append('<li style="padding-left: 10px">No results found...</li>')
            };
        $("[data-toggle=tooltip]").tooltip();
    });
    $("#top-toggle").dropdown('toggle');
}
</script>
</body>
</html>